# 更新日志

本文档记录了 mihomo-rs 项目的所有重要更改。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中
- 支持更多代理协议
- 图形界面支持
- 插件系统
- 配置文件模板

## [0.1.0] - 2024-01-XX

### 新增
- 🚀 完整的 Rust SDK，支持 mihomo 代理服务管理
- 🛠️ 功能丰富的命令行工具 (CLI)
- 📦 服务生命周期管理（初始化、启动、停止、重启）
- 🔄 版本管理系统（下载、安装、升级、回滚）
- 📊 实时监控功能（连接状态、流量统计、性能监控）
- 🎯 规则引擎支持（流量分流、规则匹配）
- 🔧 配置管理（解析、验证、重载）
- 🗂️ 代理管理（列表、切换、延迟测试）
- 🔐 认证和安全支持
- 📝 完整的错误处理和日志系统

### 核心功能

#### SDK 功能
- `MihomoClient` - 主要客户端接口
- `ServiceManager` - 服务管理器
- `ConfigManager` - 配置管理器
- `ProxyManager` - 代理管理器
- `RuleEngine` - 规则引擎
- `Monitor` - 监控模块
- 完整的类型定义和错误处理

#### CLI 工具
- `mihomo-rs status` - 查看服务状态
- `mihomo-rs service` - 服务管理命令组
  - `init` - 初始化服务
  - `start/stop/restart` - 服务控制
  - `upgrade` - 版本升级
  - `uninstall` - 服务卸载
  - `cleanup` - 备份清理
- `mihomo-rs proxy` - 代理管理命令组
- `mihomo-rs config` - 配置管理命令组
- `mihomo-rs monitor` - 监控命令
- `mihomo-rs rules` - 规则管理
- `mihomo-rs connections` - 连接管理

#### 服务管理特性
- 自动下载和安装 mihomo 二进制文件
- 基于 PID 文件的进程管理
- 版本升级和回滚机制
- 自动备份和清理
- 配置目录自动初始化
- 跨平台支持 (macOS, Linux, Windows)

#### 监控和统计
- 实时连接监控
- 流量统计
- 代理延迟测试
- 服务健康检查
- 性能指标收集

### 技术特性
- 🦀 纯 Rust 实现，性能优异
- 🔄 异步编程支持 (tokio)
- 📋 结构化日志 (log + env_logger)
- 🧪 完整的测试覆盖（单元测试、集成测试、性能测试）
- 📚 详细的文档和示例
- 🔧 模块化设计，易于扩展

### 依赖项
- `serde` - 序列化和反序列化
- `reqwest` - HTTP 客户端
- `tokio` - 异步运行时
- `clap` - 命令行参数解析
- `sysinfo` - 系统信息获取
- `chrono` - 时间处理
- `regex` - 正则表达式
- `thiserror` - 错误处理

### 文档
- 📖 完整的 README.md
- 📚 API 文档 (docs.rs)
- 💡 使用示例和教程
- 🔧 开发者指南

### 测试
- ✅ 单元测试覆盖所有核心功能
- 🧪 集成测试验证端到端功能
- ⚡ 性能测试确保高效运行
- 🎭 Mock 测试支持离线开发

---

## 版本说明

### 语义化版本
- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 发布周期
- 主版本：根据需要发布
- 次版本：每月发布
- 修订版本：根据 bug 修复需要发布

### 支持政策
- 最新的主版本将持续维护
- 前一个主版本将提供 6 个月的安全更新
- 更老的版本不再维护